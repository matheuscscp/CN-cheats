
<style>

* {
  margin: 0 auto;
}

html, body {
  text-align: center;
}

</style>

<!-- mathjax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>

<!-- jquery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.0.0.min.js"></script>

<script>

function tostr(A) {
  ces = "";
  for (i = 0; i < A[0].length-1; i++) ces += "c";
  str = "\\left(\\begin{array}{"+ces+"|c}";
  for (i = 0; i < A.length; i++) {
    for (j = 0; j < A[0].length; j++) {
      if (j > 0) str += " & ";
      str += A[i][j];
    }
    str += "\\\\";
  }
  return str+"\\end{array}\\right)";
}

function clear() {
  $("#canvas").html("");
}

function print(str) {
  $("#canvas").append($("<div>"+str+"</div>"));
}

function gauss(A) {
  clear();
  print("$$"+tostr(A)+"$$");
  M = A.length;
  N = A[0].length;
  for (m = 0, n = 0; n < N-1; n++) {
    var i;
    for (i = m; i < M && A[i][n] == 0; i++);
    if (i == M) continue;
    if (i != m) {
      var tmp = A[i];
      A[i] = A[m];
      A[m] = tmp;
      print("Trocamos $L_"+(i+1)+"$ com $L_"+(m+1)+"$");
    }
    inv = 1/A[m][n];
    A[m][n] = 1;
    for (j = n+1; j < N; j++) A[m][j] *= inv;
    print("$$L_"+(m+1)+" \\gets "+inv+"L_"+(m+1)+"$$");
    for (i = m+1; i < M; i++) {
      mul = -A[i][n];
      A[i][n] = 0;
      for (j = n+1; j < N; j++) A[i][j] += A[m][j]*mul;
      print("$$L_"+(i+1)+" \\gets L_"+(i+1)+(mul >= 0 ? " + " : "")+mul+"L_"+(m+1)+"$$")
    }
    m++;
    print("$$"+tostr(A)+"$$");
  }
  MathJax.Hub.Typeset();
}

function abre() {
  $("#A").html("");
  M = $("#M").val()*1;
  N = $("#N").val()*1;
  $("#Mh").val(M);
  $("#Nh").val(N);
  for (m = 0; m < M; m++) {
    row = "";
    for (n = 0; n < N; n++) row += "<td><input id=\"A_"+m+"_"+n+"\" type=\"number\" ></td>";
    $("#A").append($("<tr>"+row+"</tr>"));
  }
}

$(document).ready(function() {
  $("#abre").click(abre);
  $("#calcula").click(function() {
    M = $("#Mh").val()*1;
    N = $("#Nh").val()*1;
    A = new Array(M);
    for (m = 0; m < M; m++) {
      A[m] = new Array(N);
      for (n = 0; n < N; n++) A[m][n] = $("#A_"+m+"_"+n).val()*1;
    }
    gauss(A);
  });
  abre();
  $("#A_0_0").focus();
});

</script>
<body>

<div>
<input id="M" type="number" value="3" />
<input id="N" type="number" value="3" />
<input id="Mh" type="hidden" />
<input id="Nh" type="hidden" />
<button id="abre">abre</button>
<table id="A"></table>
<button id="calcula">calcula</button>
</div>
<div id="canvas"></div>

</body>
